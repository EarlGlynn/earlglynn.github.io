Caching the Mean of a Vector
============================

These are notes about the example in the second programming assignment in the Coursera _R Programming_ class. 

In the beginning ...

```{r}
search()   # try ls() with any element from search list
ls()       # same as ".GlobalEnv" below
ls(".GlobalEnv")   
```

The example in the assignment gives R code for `makeVector` and `cachemean`:

`makeVector` creates a special "vector", which is really a list containing
 a function to:

1. set the value of the vector
2. get the value of the vector
3. set the value of the mean
4. get the value of the mean   

```{r}
makeVector <- function(x = numeric()) {
        m <- NULL
        set <- function(y) {
                x <<- y
                m <<- NULL
        }
        get <- function() x
        setmean <- function(mean) m <<- mean
        getmean <- function() m
        list(set = set, get = get,
             setmean = setmean,
             getmean = getmean)
}            
```

The following function calculates the mean of the special "vector"
created with the above function. However, it first checks to see if
the mean has already been calculated. If so, it gets the mean from
the cache and skips the computation. Otherwise, it calculates the
mean of the data and sets the value of the mean in the cache via the
`setmean` function.   

```{r}
cachemean <- function(x, ...) {
        m <- x$getmean()
        if(!is.null(m)) {
                message("getting cached data")
                return(m)
        }
        data <- x$get()
        m <- mean(data, ...)
        x$setmean(m)
        m
}                   
```

How can we make sense of `creaeVector` and `cachemean` in the example?

`makeVector` is used to create the "special" vector `v`.  Note that we're passing the vector 0:10, which has a mean of 5, to `makeVector`:
```{r}
v <- makeVector(0:10)
length(v)
v     
```

No surprise here, the environment has three objects now:
```{r}
ls() 
```

But there were side effecs from calling `makeVector`, namely
establishing `x` and `m` in the environment of the functions
returned in the list:              

```{r}
ls(environment(v$getmean))
get("m", environment(v$getmean))
get("x", environment(v$getmean)) 
```

The `get()` function returns the vector stored in `x` inside the
function's environment.   


```{r}
v$get() 
```

The mean must be set separately from defining the vector (why?).

The `getmean()` function returns m defined in function `set()`
to be NULL.

```{r}
v$getmean() 
```

Since mean is undefined, let's set its value in the "cache",
i.e., the environment of the four functions in the list.


```{r}
v$setmean( mean(v$get()) )   
```

Let's check on those enviroment variables, since `m` now is defined:

```{r}
ls(environment(v$getmean))
get("m", environment(v$getmean))
get("x", environment(v$getmean))  
```

`getmean()` now returns something meaningful from the "cache":

```{r}
v$getmean()
```

The `cachemean()` function returns the value from the cache instead of computing it:

```{r}
cachemean(v)    
```


_efg_, 2014-02-01
